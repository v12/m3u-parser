sudo: false

language: node_js

node_js:
  - "node"
  - "0.12"
  - "0.11"
  - "0.10"
  - "iojs"

addons:
  code_climate:
    repo_token: c03c3ee4ec400e561c058906ae176373b61677e0a13b2d6892015ed399a44274

before_script:
  - npm install -g codeclimate-test-reporter

script: npm run ci-test

after_script:
  - codeclimate < coverage/lcov.info

deploy:
  provider: npm
  email: dr.evil@krtn.eu
  api_key:
    secure: UqkQhltzzEzHJ1le8PRlGazywsUsfvfoj44SQ8WT792OZ/HdncbE1WYtP/OaV0IXvk3US5wWEs2WDnfBkHDl8RSzcCbNe/KdY3aqkBBMOCcy9or8+x0XEG2Ji9tFdKwNiwH3BkSzrIxERyyMoeUA6QMHiwQd3wSwyAUFyK2EeRI=
  on:
    tags: true
    repo: v12/m3u-parser
